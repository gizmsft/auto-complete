function AutoComplete(s,e){var n,r={settings:null},o=(r.settings=$.extend(!0,{},{apiRequestDelay:300,enabled:!0,events:{autoComplete:function(e,t){console.log("autocomplete event raised.",e,t)}},trigger:{match:void 0,search:void 0}},e),n={},{setSearchCache:function(e,t){n[e]=t},getSearchCache:function(e){return n[e]||null}}),i=new AjaxCallSynchronizer({apiRequestDelay:r.settings.apiRequestDelay,apiRequest:r.settings.trigger.search});this.setEnabled=function(e){r.settings.enabled=!!e};function a(e,t){var n=u(),r=o.getSearchCache(e);e&&!r&&o.setSearchCache(e,t),n&&n===e&&c(e,t)}function c(e,t){r.settings.events.autoComplete&&r.settings.events.autoComplete(e,t)}function u(){var e=function(e){for(var t="",n=0;n<e.length;n++)e.substr(n,1).charCodeAt(0)<=parseInt("06FF",16)&&(t+=e.substr(n,1));return t}(function(){var e=s.val(),t=s.get(0),n=t.selectionEnd,r={preText:void 0,postText:void 0,cursorPosition:void 0};{if("number"==typeof n)return r.preText=e.substring(0,n),r.postText=e.substring(n),r.cursorPosition=r.preText.length,r;if(document.selection)return(t=t.createTextRange()).moveStart("character",0),t.moveEnd("textedit"),r.preText=t.text,r.postText=e.substring(n),r.cursorPosition=r.preText.length,r}throw"unsupported browser."}().preText).match(r.settings.trigger.match);return e&&0<e.length?e[0]:null}s.on("change keypress keydown keyup input propertychange click",function(){var e,t;r.settings.enabled&&(e=u(),(t=o.getSearchCache(e))?a(e,t):null!=e?i.execute(e,a):c(e,[]))})}